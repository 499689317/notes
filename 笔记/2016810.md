## 总结

+ 战歌项目
+ 其它

___

### 战歌项目

___

+ 战斗
+ 技能
+ UI
+ 新手引导
+ 缓冲池

___

#### 战斗

___

+ 挂机
+ boss
+ pvp

___


#### 技能

___

+ 技能实例
+ 技能管理器
+ 延时技能
+ 即时技能
+ 技能buff

___

#### UI

___

+ 代码生成
+ 标签生成


***

##### 挂机

___

1. 角色
	
	````
	function Role() {
		/**
		 * 人物管理类
		 * 人物数据
		 * 人物动画管理器
		 * 人物技能管理器
		 * 人物状态管理器
		 * 人物方向管理器
		 * 人物销毁
		 */ 
	}
	Manage.prototype = {
		clip: function() {},
		skill: function() {},
		state: function() {},
		dir: function() {},
	};
	function destroy() {
	}
	````

2. 技能
	
	````
	function Skill() {
		/**
		 * 技能数据(初始化,升级后会变)
		 * 技能持有者
		 * 技能受击者
		 * 技能特效
		 * 技能销毁
		 */
	}
	Skill.prototype = {
		data: null,// 技能作用范围，距离，伤害，时间等等
		init: function() {},// 初始化技能
		effect: function() {},// 技能特效
	};
	````

3. 状态
	
	````
	function State() {
		/**
		 * 人物状态抽象
		 * 人物状态切换
		 * 状态清理
		 */
	}
	````

4. 动画
	
	````
	function View() {
		/**
		 * 加载资源
		 * 更新资源
		 * 缓存资源
		 */
	}
	````

5. 地图
	
	````
	function Map() {
		/**
		 * 地图推图
		 * 地图加载
		 */
	}
	// 推图逻辑
	function setFocusPoint(point) {

		// 记录上一步视窗位置
		_orginPoint.x = _viewRect.x;
		_orginPoint.y = _viewRect.y;

		_focusPoint.x = point.x || 0;
		_focusPoint.y = point.y || 0;

		checkFocusPoint();// 调整视角
	}

	/**
	 * 调整可视区域的位置
	 */
	function checkFocusPoint() {

		// 如果在视窗中心的_moveRect区域(特殊区域)，不移动视窗
		
		// 在视窗外部移动，整个视窗跟着移动
		if (_focusPoint.x < _moveRect.x) {
			_viewRect.x = _focusPoint.x - _viewRect.width * 0.5 + _moveRect.width * 0.5;
		};
		if (_focusPoint.x > (_moveRect.x + _moveRect.width)) {
			_viewRect.x = _focusPoint.x - _viewRect.width * 0.5 - _moveRect.width * 0.5;
		};
		if (_focusPoint.y < _moveRect.y) {
			_viewRect.y = _focusPoint.y - _viewRect.height * 0.5 + _moveRect.height * 0.5;
		};
		if (_focusPoint.y > (_moveRect.y + _moveRect.height)) {
			_viewRect.y = _focusPoint.y - _viewRect.height * 0.5 - _moveRect.height * 0.5;
		};

		// 检测是否越界
		checkViewRectOffSet();

		// 调整不移动区域位置
		setMoveRectOffSet();
		
		// 移动地图(加载地图)
	}

	/**
	 * 角色位置变化引发可视区位置变化后需要调整可视区中心特殊区域的位置
	 */
	function setMoveRectOffSet() {
		_moveRect.x = _viewRect.x + (_viewRect.width - _moveRect.width) * 0.5;
		_moveRect.y = _viewRect.y + (_viewRect.height - _moveRect.height) * 0.5;
	}

	/**
	 * 边界检测
	 * 可视区移动的最大范围
	 */
	function checkViewRectOffSet() {
		
		if (_viewRect.x < 0) {
			_viewRect.x = 0;
		};
		if (_viewRect.y < 0) {
			_viewRect.y = 0;
		};
		if (_viewRect.x + _viewRect.width > _maxRect.width) {
			_viewRect.x = _maxRect.width - _viewRect.width;
		};
		if (_viewRect.y + _viewRect.height > _maxRect.height) {
			_viewRect.y = _maxRect.height - _viewRect.height;
		};
	}
	````

___

##### boss

##### pvp

***
